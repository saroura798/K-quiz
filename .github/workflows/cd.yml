name: CD - DÃ©ploiement GitHub Pages

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    # ðŸ”‘ CORRECTION CRUCIALE : Ajout des permissions d'Ã©criture
    # pour que le GITHUB_TOKEN puisse crÃ©er/mettre Ã  jour la branche gh-pages
    permissions:
      contents: write 

    steps:
      - name: ðŸ“¦ Checkout du Code
        uses: actions/checkout@v4

      - name: ðŸš€ DÃ©ploiement vers GitHub Pages
        # Cette action prend les fichiers du rÃ©pertoire actuel et les pousse sur 'gh-pages'
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          # Chemin vers vos fichiers statiques. Assurez-vous que l'index.html est ici.
          publish_dir: ./
          publish_branch: gh-pages
          force_orphan: true # Assure que 'gh-pages' est propre Ã  chaque dÃ©ploiement